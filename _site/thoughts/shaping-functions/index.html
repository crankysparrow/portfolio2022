<!DOCTYPE html>

<html lang="en">

    <head>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <title>Michelle Blog</title>
        <link rel='stylesheet' href='https://fonts.googleapis.com/css2?family=Exo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,200;1,300;1,400;1,500;1,600&family=Vollkorn:wght@400;500;600;700;800&display=swap' type='text/css'/>
        <link rel="stylesheet" type="text/css" href="/styles/style.css"/>
        
        

    </head>

    <body class="page-shader-practice">
        <a class="sr-text" href="#main">skip to content</a>

        <div class='page-wrap'>
            <header class='header'>
                <nav class="nav">
    <a aria-label="home" class="home-link" href="/">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 91 83">
            <g fill-rule="evenodd">
                <path class='m-shape' fill-rule="nonzero" d="M55.57 4v75H43V20.65l-7.47 26.09H24.36l-7.3-24.73V79H5V4h15.16l7.18 23.84A85.3 85.3 0 0 1 30 38.73a82.47 82.47 0 0 1 2.44-10.18l.22-.71L39.73 4h15.84Z"/>
                <path class='rect-shape' d="M54.67 68.16H87V79H54.67z"/>
                <path class='rect-shape' d="M54.67 4H87v10.84H54.67z"/>
                <path class='rect-shape' d="M54.67 34.72h26v10.84h-26z"/>
            </g>
        </svg>
    </a>

    <button class='ham' id='nav-open' aria-expanded='false'>
        <span class='btn-text'>menu</span>
        <span class='btn-inner'></span>
    </button>

    <ul class="nav-list" aria-hidden='true'>
        <li>
            <a href="/thoughts">notes</a>
        </li>
        <li>
            <a href="/about">about</a>
        </li>
        <li>
            <a href="/work">work</a>
        </li>
    </ul>

</nav>
            </header>

            
<main id='main'>
    <div class='wrapper'>

        <div class='title-wrap post-title-wrap'>
            <h1>shader practice</h1>

            <div class='tags-list'>
                <span class='caps'>Tags:</span>
                
                    
                    <a class='tag caps' href="/tags/generative-art/">#generative art</a>
                
                    
                    <a class='tag caps' href="/tags/shaders/">#shaders</a>
                
            </div>    

        </div>

        <div class="content post">
            <p>Let me admit that I don't understand shaders.</p>
<p>I've been slowly learning in snatches of free time, but pretty much <strong>sticking to the basics: Draw a circle. Draw a rectangle. Draw a rectangle but moved over by so many pixels. Draw the same rectangle in 4 quarters of the screen. Draw a rectangle with another rectangle inside of it.</strong></p>
<p>That's where I'm at. So this is by no means a tutorial of any kind, just some notes on some recent experiments.</p>
<p>This weekend I watched a <a href="https://www.twitch.tv/videos/1184743691">twitch stream</a> from <a href="https://www.curiouslyminded.xyz/">curiouslyminded</a> exploring shaders, and got inspired to go back to The Book of Shaders and take a look at some basic exercises/ideas.</p>
<p>The <a href="https://thebookofshaders.com/05/">shaping function</a> chapter of The Book of Shaders ends with suggestions of equations to play with to start building up a 'toolbox' of functions for various projects.</p>
<p>This <a href="http://www.kynd.info/">graphic</a> shows a bunch of ways to manipulate values between 0 and 1:</p>
<p class="img-link"><a href="/images/shaders-shaping/shaders-kynd.png"><img src="/images/shaders-shaping/shaders-kynd.png" alt="chart showing functions that move a point between -1 and 1 on the x-axis and 0 and 1 on the y-axis."></a></p>
<p>If you take a look at the top row of the image, you can see how <strong>the function is basically the same except that the exponent moves between 0.5 and 3.5.</strong> So I thought we could get some cool shapes by making that exponent into a variable that gradually shifts between two different values.</p>
<p>The first equation is <strong><code>1.0 - pow(abs(x), 0.5)</code></strong>. I managed to figure out how to map this into a simple shader. At first I just did this in VSCode using the <a href="https://marketplace.visualstudio.com/items?itemName=circledev.glsl-canvas">GLSL Viewer</a> extension, then I moved it into p5.js.</p>
<p>I still do not entirely understand how the setup works with these... I generally start out by grabbing the uniform/attribute names and the scripts to position the shader correctly from an external resource. The Book of Shaders helped with the first version; in the second, I used language from this <a href="https://itp-xstory.github.io/p5js-shaders/#/">p5.js shaders guide</a>.</p>
<pre class="language-glsl"><code class="language-glsl"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">GL_ES</span></span><br><span class="token keyword">precision</span> <span class="token keyword">mediump</span> <span class="token keyword">float</span><span class="token punctuation">;</span><br><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span><br><br><span class="token keyword">uniform</span> <span class="token keyword">vec2</span> u_resolution<span class="token punctuation">;</span><br><br><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">vec2</span> st <span class="token operator">=</span> gl_FragCoord<span class="token punctuation">.</span>xy<span class="token operator">/</span>u_resolution<span class="token punctuation">.</span>xy<span class="token punctuation">;</span><br>    st<span class="token punctuation">.</span>x <span class="token operator">*=</span> u_resolution<span class="token punctuation">.</span>x<span class="token operator">/</span>u_resolution<span class="token punctuation">.</span>y<span class="token punctuation">;</span><br>    st <span class="token operator">-=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    st <span class="token operator">*=</span> <span class="token number">2.</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">float</span> c <span class="token operator">=</span> <span class="token number">1.0</span> <span class="token operator">-</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token function">abs</span><span class="token punctuation">(</span>st<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">vec3</span> color <span class="token operator">=</span> <span class="token keyword">vec3</span><span class="token punctuation">(</span><span class="token function">step</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> st<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    gl_FragColor <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>color<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>Then I moved it into p5.js:</p>
<div class="code-img">
<pre class="language-js"><code class="language-js"><span class="token keyword">let</span> vShader <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>attribute vec3 aPosition;<br>attribute vec2 aTexCoord;<br>varying vec2 vTexCoord;<br><br>void main() {<br>vTexCoord = aTexCoord;<br>vec4 positionVec4 = vec4(aPosition, 1.0);<br>positionVec4.xy = positionVec4.xy \* 2.0 - 1.0;<br>gl_Position = positionVec4;<br>}<br></span><span class="token template-punctuation string">`</span></span><br><br><span class="token keyword">let</span> fShader <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string"><br>precision mediump float;<br>uniform vec2 resolution;<br><br>void main() {<br>vec2 st = gl_FragCoord.xy / resolution.xy;<br>st -= vec2(1.0, 1.0);<br>float c = 1.0 - pow(abs(st.x), 0.5);<br>vec3 color = vec3(step(c, st.y));<br>gl_FragColor = vec4(color, 1.0);<br>}<br></span><span class="token template-punctuation string">`</span></span><br><br><span class="token keyword">function</span> <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token function">createCanvas</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token constant">WEBGL</span><span class="token punctuation">)</span><br><span class="token function">noStroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>shd <span class="token operator">=</span> <span class="token function">createShader</span><span class="token punctuation">(</span>vShader<span class="token punctuation">,</span> fShader<span class="token punctuation">)</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token function">shader</span><span class="token punctuation">(</span>shd<span class="token punctuation">)</span><br>shd<span class="token punctuation">.</span><span class="token function">setUniform</span><span class="token punctuation">(</span><span class="token string">'resolution'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>width<span class="token punctuation">,</span> height<span class="token punctuation">]</span><span class="token punctuation">)</span><br><span class="token function">rect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre>
<div class='img-col'>
<em>result: </em>
<img src="/images/shaders-shaping/shader1.png" alt="two white curves, mirror images of each other, on black background"  />
</div>
</div>
<p>Okay, leaving aside all the uniforms and positioning bits, the important part in each bit of code is these couple of lines:</p>
<pre class="language-glsl"><code class="language-glsl"><span class="token keyword">float</span> c <span class="token operator">=</span> <span class="token number">1.0</span> <span class="token operator">-</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token function">abs</span><span class="token punctuation">(</span>st<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">vec3</span> color <span class="token operator">=</span> <span class="token keyword">vec3</span><span class="token punctuation">(</span><span class="token function">step</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> st<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Using a smoothstep function instead of step lets us make the shape into a line. I got this code from The Book of Shaders, although I still can't quite get my brain to wrap around the way it works, I might need to dig into that a bit more another day.</p>
<div class="code-img">
<pre class="language-glsl"><code class="language-glsl"><span class="token keyword">float</span> c <span class="token operator">=</span> <span class="token number">1.0</span> <span class="token operator">-</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token function">abs</span><span class="token punctuation">(</span>st<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">vec3</span> color <span class="token operator">=</span> <span class="token keyword">vec3</span><span class="token punctuation">(</span><span class="token function">smoothstep</span><span class="token punctuation">(</span>c <span class="token operator">-</span> <span class="token number">0.02</span><span class="token punctuation">,</span> c<span class="token punctuation">,</span> st<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">smoothstep</span><span class="token punctuation">(</span>c<span class="token punctuation">,</span> c <span class="token operator">+</span> <span class="token number">0.02</span><span class="token punctuation">,</span> st<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<div class='img-col'>
<em>result: </em>
<img src="/images/shaders-shaping/shader2.png" alt="" />
</div>
</div>
<p>Then if we adjust the exponent, we can manipulate the shape:</p>
<div class="code-imgs-columns">
<div class="column">
<pre class="language-glsl"><code class="language-glsl"><span class="token keyword">float</span> c <span class="token operator">=</span> <span class="token number">1.0</span> <span class="token operator">-</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token function">abs</span><span class="token punctuation">(</span>st<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<img src="/images/shaders-shaping/shader3.png" alt="" />
</div>
<div class="column">
<pre class="language-glsl"><code class="language-glsl"><span class="token keyword">float</span> c <span class="token operator">=</span> <span class="token number">1.0</span> <span class="token operator">-</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token function">abs</span><span class="token punctuation">(</span>st<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<img src="/images/shaders-shaping/shader4.png" alt="" />
</div>
<div class="column">
<pre class="language-glsl"><code class="language-glsl"><span class="token keyword">float</span> c <span class="token operator">=</span> <span class="token number">1.0</span> <span class="token operator">-</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token function">abs</span><span class="token punctuation">(</span>st<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<img src="/images/shaders-shaping/shader5.png" alt="" />
</div>
</div>
<p>I moved the formula for the shape out into a separate function, and added a second function that would be a reflection of it:</p>
<div class="code-img">
<pre class="language-glsl"><code class="language-glsl"><span class="token keyword">float</span> <span class="token function">shape</span><span class="token punctuation">(</span><span class="token keyword">float</span> power<span class="token punctuation">,</span> <span class="token keyword">float</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	<span class="token keyword">return</span>  <span class="token number">1.0</span> <span class="token operator">-</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token function">abs</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> power<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">float</span> <span class="token function">shapeTwo</span><span class="token punctuation">(</span><span class="token keyword">float</span> power<span class="token punctuation">,</span> <span class="token keyword">float</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token function">abs</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> power<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br><span class="token keyword">vec2</span> st <span class="token operator">=</span> gl_FragCoord<span class="token punctuation">.</span>xy <span class="token operator">/</span> resolution<span class="token punctuation">.</span>xy<span class="token punctuation">;</span><br>st <span class="token operator">-=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">float</span> c1 <span class="token operator">=</span> <span class="token function">shape</span><span class="token punctuation">(</span><span class="token number">1.5</span><span class="token punctuation">,</span> st<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">float</span> c2 <span class="token operator">=</span> <span class="token function">shapeTwo</span><span class="token punctuation">(</span><span class="token number">1.5</span><span class="token punctuation">,</span> st<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">vec3</span> color <span class="token operator">=</span> <span class="token keyword">vec3</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    color <span class="token operator">+=</span> <span class="token function">smoothstep</span><span class="token punctuation">(</span>c1<span class="token operator">-</span><span class="token number">0.02</span><span class="token punctuation">,</span> c1<span class="token punctuation">,</span> st<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">smoothstep</span><span class="token punctuation">(</span>c1<span class="token punctuation">,</span> c1<span class="token operator">+</span><span class="token number">0.02</span><span class="token punctuation">,</span> st<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    color <span class="token operator">+=</span> <span class="token function">smoothstep</span><span class="token punctuation">(</span>c2<span class="token operator">-</span><span class="token number">0.02</span><span class="token punctuation">,</span> c2<span class="token punctuation">,</span> st<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">smoothstep</span><span class="token punctuation">(</span>c2<span class="token punctuation">,</span> c2<span class="token operator">+</span><span class="token number">0.02</span><span class="token punctuation">,</span> st<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    gl_FragColor <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>color<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token punctuation">}</span></code></pre>
<div class='img-col'>
<em>result</em>
<img src="/images/shaders-shaping/shader-reflect1.png" alt="" />
</div>
</div>
<p>It turned out that to get the effect I was imagining I needed to move the second shape down:</p>
<div class="code-img">
<pre class="language-glsl"><code class="language-glsl"><span class="token keyword">float</span> <span class="token function">shapeTwo</span><span class="token punctuation">(</span><span class="token keyword">float</span> power<span class="token punctuation">,</span> <span class="token keyword">float</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">return</span> <span class="token function">pow</span><span class="token punctuation">(</span><span class="token function">abs</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">,</span> power<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1.0</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<div class='img-col'>
<em>result: </em>
<img src="/images/shaders-shaping/shader-reflect2.png" alt="" />
</div>
</div>
<p>Then I added a for loop to basically do the same thing a bunch of times, adjusting the exponent slightly on each iteration of the loop:</p>
<div class="code-img">
<pre class="language-glsl"><code class="language-glsl"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">float</span> i <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1.0</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">0.1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    <span class="token keyword">float</span> c1 <span class="token operator">=</span> <span class="token function">shape</span><span class="token punctuation">(</span>power <span class="token operator">-</span> i<span class="token punctuation">,</span> st<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">float</span> c2 <span class="token operator">=</span> <span class="token function">shapeTwo</span><span class="token punctuation">(</span>power <span class="token operator">-</span> i<span class="token punctuation">,</span> st<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    color <span class="token operator">+=</span> <span class="token function">smoothstep</span><span class="token punctuation">(</span>c1<span class="token operator">-</span><span class="token number">0.02</span><span class="token punctuation">,</span> c1<span class="token punctuation">,</span> st<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">smoothstep</span><span class="token punctuation">(</span>c1<span class="token punctuation">,</span> c1<span class="token operator">+</span><span class="token number">0.02</span><span class="token punctuation">,</span> st<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    color <span class="token operator">+=</span> <span class="token function">smoothstep</span><span class="token punctuation">(</span>c2<span class="token operator">-</span><span class="token number">0.02</span><span class="token punctuation">,</span> c2<span class="token punctuation">,</span> st<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">smoothstep</span><span class="token punctuation">(</span>c2<span class="token punctuation">,</span> c2<span class="token operator">+</span><span class="token number">0.02</span><span class="token punctuation">,</span> st<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<div class='img-col'>
<em>result: </em>
<img src="/images/shaders-shaping/shader-loop.png"  />
</div>
</div>
<p>Sometime after that, I added in a uniform for time - basically just a variable that increments each time p5's draw function runs, and gets passed to the shader.</p>
<p>Aaaaand after some experimentation ended up with this final product:</p>
<p><img src="/images/shaders-shaping/final-linear.gif" alt=""></p>
<p>Here's the final code in the main fragment shader:</p>
<pre class="language-glsl"><code class="language-glsl"><span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>	<span class="token keyword">vec2</span> st <span class="token operator">=</span> gl_FragCoord<span class="token punctuation">.</span>xy <span class="token operator">/</span> resolution<span class="token punctuation">.</span>xy<span class="token punctuation">;</span><br>	st <span class="token operator">*=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	st <span class="token operator">-=</span> <span class="token keyword">vec2</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>	<span class="token keyword">vec3</span> color <span class="token operator">=</span> <span class="token keyword">vec3</span><span class="token punctuation">(</span><span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token keyword">float</span> power <span class="token operator">=</span> <span class="token function">max</span><span class="token punctuation">(</span><span class="token function">fract</span><span class="token punctuation">(</span>time <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4.0</span> <span class="token operator">-</span> <span class="token number">3.0</span><span class="token punctuation">,</span> <span class="token function">fract</span><span class="token punctuation">(</span>time <span class="token operator">*</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token operator">-</span><span class="token number">4.0</span> <span class="token operator">+</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">float</span> i <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1.0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">1.0</span><span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">0.1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>		<span class="token keyword">float</span> c1 <span class="token operator">=</span> <span class="token function">shape</span><span class="token punctuation">(</span>power <span class="token operator">-</span> i<span class="token punctuation">,</span> st<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><br>		<span class="token keyword">float</span> c2 <span class="token operator">=</span> <span class="token function">shapeTwo</span><span class="token punctuation">(</span>power <span class="token operator">-</span> i<span class="token punctuation">,</span> st<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><br>		color <span class="token operator">+=</span> <span class="token function">smoothstep</span><span class="token punctuation">(</span>c1<span class="token operator">-</span><span class="token number">0.02</span><span class="token punctuation">,</span> c1<span class="token punctuation">,</span> st<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">smoothstep</span><span class="token punctuation">(</span>c1<span class="token punctuation">,</span> c1<span class="token operator">+</span><span class="token number">0.02</span><span class="token punctuation">,</span> st<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span><br>		color <span class="token operator">+=</span> <span class="token function">smoothstep</span><span class="token punctuation">(</span>c2<span class="token operator">-</span><span class="token number">0.02</span><span class="token punctuation">,</span> c2<span class="token punctuation">,</span> st<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token function">smoothstep</span><span class="token punctuation">(</span>c2<span class="token punctuation">,</span> c2<span class="token operator">+</span><span class="token number">0.02</span><span class="token punctuation">,</span> st<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span><br>	<span class="token punctuation">}</span><br><br>	gl_FragColor <span class="token operator">=</span> <span class="token keyword">vec4</span><span class="token punctuation">(</span>color<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<p>A couple notes on this last bit of code:</p>
<ul>
<li>At some point, I adjusted the code in the beginning of this function that positions the <code>st</code> variable. The <code>st *= vec2(1.0, 2.0);</code> line stretches out the x-axis.</li>
<li>The line that adjusts the power function according to the time is pretty weird... I was trying to just have it move linearly up &amp; down rather than use a sine function for timing. I fiddled with <a href="https://graphtoy.com">graphtoy.com</a> until I found the function combination I liked. If you follow <a href="https://graphtoy.com/?f1(x,t)=fract(x*0.5)*-4.0+1.0&amp;v1=false&amp;f2(x,t)=fract(x*0.5)*4.0-3.0&amp;v2=false&amp;f3(x,t)=max(f1(x),f2(x))&amp;v3=true&amp;f4(x,t)=&amp;v4=false&amp;f5(x,t)=&amp;v5=false&amp;f6(x,t)=&amp;v6=false&amp;grid=true&amp;coords=0,0,4.205926793776717">this link</a> you should be able to see exactly what those functions were and how they are combined (click on the labels next to each of the functions to toggle their visibility).</li>
</ul>
<p>Here's a version using sine function for timing instead of linear:</p>
<p><img src="/images/shaders-shaping/final-sine.gif" alt=""></p>

            <div class='back'>
                <a href='/thoughts'> ← all thoughts</a>
            </div>
        </div>

    </div>
</main>

            <footer class="footer">

    <div class='footer-inner wrapper'>
        <div class='footer-links'>
            <a href='/credits'>Credits</a>
            <a href='/accessibility'>Accessibility</a>
        </div>

        <div class='footer-socials'>
            <a href="https://www.linkedin.com/in/michelle-enos/">
                <i class='icon-'>linkedin</i>
            </a>
            <a href="https://github.com/crankysparrow">
                <i class='icon-'>github</i>
            </a>
            <a href="https://codepen.io/crankysparrow">
                <i class='icon-'>codepen</i>
            </a>
        </div>
    </div>

</footer>
        </div>

        
        <script src="/scripts/nav.js"></script>

    </body>

</html>